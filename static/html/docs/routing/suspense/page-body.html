<div id='markdown'><h1 id="suspense">Suspense</h1>
<p>Temporary <code>Suspense</code> is similar to <a href="https://react.dev/reference/react/Suspense">React Suspense</a> and lets you display a fallback until its children have finished loading and rendering. With this convention, you can show an instant loading state from the server while the content of a route segment loads. The new content is automatically swapped in once rendering is complete.</p>
<pre><code class="language-go">@temporary.Suspense(Loading()) {
	@SomeComponent()
}
</code></pre>
<h3 id="props">Props</h3>
<ul>
<li><code>children</code>: The actual UI you intend to render. If <code>children</code> is wrapped in a Suspense, the Suspense boundary will switch to a rendering fallback.</li>
<li><code>parameter</code>: An alternate UI to display in place of the actual UI if it has not finished loading. Any valid Templ Component is accepted, though in practice, the parameter is a lightweight placeholder view, such as a loading spinner or skeleton. Suspense will automatically switch to the parameter when children suspends, and back to children when the data is ready.</li>
</ul>
<h3 id="example">Example</h3>
<p>Below we are defining how the page will handle the suspense.</p>
<pre><code class="language-go">func Page() templ.Component {
	return SuspenseExample()
}

templ SuspenseExample() {
	@temporary.Suspense(Spinner()) {
		@RandomNumber()
	}
}
</code></pre>
<p>We are defining a <code>RandomNumber</code> function that sleeps for 3 seconds and the <code>Spinner</code> templ we want to use in the loading state.</p>
<pre><code class="language-go">func RandomNumber() templ.Component {
	rand.Seed(time.Now().UnixNano())

	rn := rand.Intn(101)
	time.Sleep(3 * time.Second)

	return RandomNumberTempl(rn)
}

templ RandomNumberTempl(number int) {
	&lt;h1&gt;{ number }&lt;/h1&gt;
}

templ Spinner(){
	&lt;md-circular-progress&gt;&lt;/md-circular-progress&gt;
}
</code></pre>
<ol>
<li>The client will first receive the <code>&lt;md-circular-progress&gt;&lt;/md-circular-progress&gt;</code></li>
<li>Once fetching/rendering is completed with <code>RandomNumber</code>, the output (e.g. <code>&lt;h1&gt;21&lt;/h1&gt;</code>) will be swapped into the dom.</li>
</ol>
<h2 id="under-the-hood">Under the Hood</h2>
<p>This uses the HTMX <code>hx-get</code>, <code>hx-trigger=&quot;load&quot;</code> and <code>hx-swap=&quot;outerHTML&quot;</code> attributes with a random UUID endpoint assigned at request-time that gets destroyed upon completion of the request.</p>
<p>Here's a glimpse of what the HTMX implementation might look like in HTML:</p>
<pre><code class="language-html">&lt;div hx-get=&quot;UUID&quot; hx-trigger=&quot;load&quot; hx-swap=&quot;outerHTML&quot; hx-indicator=&quot;#spinner&quot;&gt;
  &lt;div id=&quot;spinner&quot;&gt;		
    &lt;md-circular-progress&gt;&lt;/md-circular-progress&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
</div>